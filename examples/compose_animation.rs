use ecalli_layout_backend::feature::json::{AnimateSubject, AnimationRequest};
use ecalli_layout_backend::feature::*;
use std::fs;

#[tokio::main]
async fn main() -> Result<(), AppError> {
    let test_req = AnimationRequest {
        subject:"李白 登金陵鳳凰臺".into(),
        subject_font_type: "行書".into(),
        subject_list: Vec::new(),
        content:"鳳凰臺上鳳凰遊鳳去臺空江自流吳宮花草埋幽徑晉代衣冠成古丘三山半茖青天外二水中分白鷺洲總為浮雲能蔽日長安不見使人愁".into(),
        font_type:"行書".into(),
        word_list: vec![AnimateSubject{pos_x:631.,pos_y:43.,width:86,height:90,modify_x: 0.},AnimateSubject{pos_x:631.,pos_y:153.,width:86,height:83,modify_x: 0.},AnimateSubject{pos_x:631.,pos_y:256.,width:86,height:116,modify_x: 0.},AnimateSubject{pos_x:631.,pos_y:392.,width:86,height:80,modify_x: 0.},AnimateSubject{pos_x:631.,pos_y:492.,width:86,height:90,modify_x: 0.},AnimateSubject{pos_x:631.,pos_y:602.,width:86,height:83,modify_x: 0.},AnimateSubject{pos_x:631.,pos_y:705.,width:86,height:80,modify_x: 0.},AnimateSubject{pos_x:631.,pos_y:805.,width:86,height:90,modify_x: 0.},AnimateSubject{pos_x:631.,pos_y:915.,width:86,height:95,modify_x: 0.},AnimateSubject{pos_x:535.,pos_y:43.,width:86,height:116,modify_x: 0.},AnimateSubject{pos_x:535.,pos_y:179.,width:86,height:92,modify_x: 0.},AnimateSubject{pos_x:535.,pos_y:291.,width:86,height:75,modify_x: 0.},AnimateSubject{pos_x:535.,pos_y:386.,width:86,height:149,modify_x: 0.},AnimateSubject{pos_x:535.,pos_y:555.,width:86,height:83,modify_x: 0.},AnimateSubject{pos_x:535.,pos_y:658.,width:86,height:81,modify_x: 0.},AnimateSubject{pos_x:535.,pos_y:759.,width:86,height:104,modify_x: 0.},AnimateSubject{pos_x:535.,pos_y:883.,width:86,height:90,modify_x: 0.},AnimateSubject{pos_x:439.,pos_y:43.,width:86,height:111,modify_x: 0.},AnimateSubject{pos_x:439.,pos_y:174.,width:86,height:73,modify_x: 0.},AnimateSubject{pos_x:439.,pos_y:267.,width:86,height:74,modify_x: 0.},AnimateSubject{pos_x:439.,pos_y:361.,width:86,height:75,modify_x: 0.},AnimateSubject{pos_x:439.,pos_y:456.,width:86,height:83,modify_x: 0.},AnimateSubject{pos_x:439.,pos_y:559.,width:86,height:86,modify_x: 0.},AnimateSubject{pos_x:439.,pos_y:665.,width:86,height:80,modify_x: 0.},AnimateSubject{pos_x:439.,pos_y:765.,width:86,height:83,modify_x: 0.},AnimateSubject{pos_x:439.,pos_y:868.,width:86,height:96,modify_x: 0.},AnimateSubject{pos_x:343.,pos_y:43.,width:86,height:106,modify_x: 0.},AnimateSubject{pos_x:343.,pos_y:169.,width:86,height:77,modify_x: 0.},AnimateSubject{pos_x:343.,pos_y:266.,width:86,height:61,modify_x: 0.},AnimateSubject{pos_x:343.,pos_y:347.,width:86,height:69,modify_x: 0.},AnimateSubject{pos_x:343.,pos_y:436.,width:86,height:125,modify_x: 0.},AnimateSubject{pos_x:343.,pos_y:581.,width:86,height:99,modify_x: 0.},AnimateSubject{pos_x:343.,pos_y:700.,width:86,height:100,modify_x: 0.},AnimateSubject{pos_x:343.,pos_y:820.,width:86,height:86,modify_x: 0.},AnimateSubject{pos_x:343.,pos_y:926.,width:86,height:92,modify_x: 0.},AnimateSubject{pos_x:247.,pos_y:43.,width:86,height:60,modify_x: 0.},AnimateSubject{pos_x:247.,pos_y:123.,width:86,height:79,modify_x: 0.},AnimateSubject{pos_x:247.,pos_y:222.,width:86,height:116,modify_x: 0.},AnimateSubject{pos_x:247.,pos_y:358.,width:86,height:71,modify_x: 0.},AnimateSubject{pos_x:247.,pos_y:449.,width:86,height:91,modify_x: 0.},AnimateSubject{pos_x:247.,pos_y:560.,width:86,height:99,modify_x: 0.},AnimateSubject{pos_x:247.,pos_y:679.,width:86,height:86,modify_x: 0.},AnimateSubject{pos_x:247.,pos_y:785.,width:86,height:82,modify_x: 0.},AnimateSubject{pos_x:247.,pos_y:887.,width:86,height:100,modify_x: 0.},AnimateSubject{pos_x:151.,pos_y:43.,width:86,height:90,modify_x: 0.},AnimateSubject{pos_x:151.,pos_y:153.,width:86,height:98,modify_x: 0.},AnimateSubject{pos_x:151.,pos_y:271.,width:86,height:88,modify_x: 0.},AnimateSubject{pos_x:151.,pos_y:379.,width:86,height:86,modify_x: 0.},AnimateSubject{pos_x:151.,pos_y:485.,width:86,height:113,modify_x: 0.},AnimateSubject{pos_x:151.,pos_y:618.,width:86,height:89,modify_x: 0.},AnimateSubject{pos_x:151.,pos_y:727.,width:86,height:82,modify_x: 0.},AnimateSubject{pos_x:151.,pos_y:829.,width:86,height:87,modify_x: 0.},AnimateSubject{pos_x:151.,pos_y:936.,width:86,height:96,modify_x: 0.},AnimateSubject{pos_x:55.,pos_y:43.,width:86,height:82,modify_x: 0.},AnimateSubject{pos_x:55.,pos_y:145.,width:86,height:58,modify_x: 0.},AnimateSubject{pos_x:55.,pos_y:223.,width:86,height:86,modify_x: 0.}],
        width:760,
        height:1040,
        fps: 15,
    };
    let webpdata = generate_poem_animation_webp(test_req).await?;
    fs::write("test_output.webp", webpdata)?;

    Ok(())
}
